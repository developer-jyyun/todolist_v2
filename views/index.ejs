<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="reset.css">    
    <link rel="stylesheet" href="main.css">
    <style>
        .todo_form{display: flex;}
    </style>
</head>
<body>
    <div class="inner">    
       <div class="todo_wrap" class="todo_wrap">
            <h1 class="title">
                ğŸŒˆ<span> TğŸŒ</span> <span>dğŸ’—</span> <span>list</span>
            </h1>
            <h4 class="msg">ğŸŒ¼ To do listë¥¼ ì™„ë£Œí•˜ì—¬ ê½ƒì„ í”¼ì›Œì£¼ì„¸ìš” ğŸŒ¼</h4>
            <div class="clock">
                <div id="date" class="date"></div>
                <div id="time" class="time"></div>
            </div>
            <form action="/add" method="POST" name="frm">
                <div class="form_group">
                    <input id="add_con" type="text" name="todo" placeholder="í•´ì•¼ í•  ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”:)">
                    <input id="add_memo" type="text" name="memo" placeholder="memo">
                </div>
                <div class="form_group">
                    <button type="submit" id="add_btn">+</button>
                    
                </div>
            </form>
            <div id="list_wrap" class="list_wrap">
                <h3> í•  ì¼ list</h3>
                <ul id="todo_ul" class="todo_ul">
                    <% for(let i = 0; i < posts.length; i++){ %>
                    <li class="todo_li" data-id="">
                        <div class="delete_top">        
                            <span id="postTime">ë“±ë¡ ë‚ ì§œ:<%= posts[i].writeDate %> </span>
                            <span class="list_num"> no: <%= posts[i]._id %> </span>     
                            <button class="delete_btn" data-id="<%= posts[i]._id %>" type="button">X</button>
                        </div>
                        <div class="li_con" data-id="li_<%= posts[i]._id %>">
                            <p class="list_num">no. : <%= posts[i]._id %> </p>
                            <h5 class="todo_txt"> 
                                <label class="label">                                    
                                    <input type="checkbox"> <%= posts[i].todo %> 
                                    <p class="memo">memo : <%= posts[i].memo %></p>
                                </label> 
                            </h5>
                        </div>                      
                    </li>
                    <% } %>
                </ul>        
                <h3> ì™„ë£Œ list</h3>
                <ul id="done_ul">
                    
                </ul>             
            </div>

        </div>

    </div>




    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>                                          
        $('.delete_btn').click(function(e){
            let idNum = e.target.dataset.id
            console.log(idNum)
            let clickDelBtn = $(this);

            $.ajax({
            method : 'DELETE', //ì‚­ì œ
            url: '/delete', //ìš”ì²­í•  ê²½ë¡œ
            data: {_id : idNum } //ë‚´ê°€ ì§€ê¸ˆ í´ë¦­í•œ ë²„íŠ¼ì˜ id
            }).done(function(ê²°ê³¼){
                //ì„±ê³µì‹œ ì‹¤í–‰
                console.log('ì‚­ì œ ì„±ê³µ^*^')
                clickDelBtn.parent('div').parent('li').fadeOut();
            }).fail(function(xhr, textStatus, errorThrown){
                //ìš”ì²­ ì‹¤íŒ¨ì‹œ ì‹¤í–‰í•  ì½”ë“œ
                console.log(xhr, textStatus, errorThrown) //ì™œ ì‹¤íŒ¨í–ˆëŠ”ì§€ ì‘ë‹µì½”ë“œì™€ ë©”ì‹œì§€ ì•Œë ¤ì¤Œ
                alert('ì‚­ì œ ì‹¤íŒ¨T_T')
            });
        })
                 
        // jsë¡œ ë³€í™˜
        // $('.todo_txt label').click(function(e){
        //     if ($(this).children('input:checkbox').prop('checked')) {//ì²´í¬ë°•ìŠ¤ í‘œì‹œ
        //         $(this).removeClass('off')                
        //         $(this).parent().siblings().removeClass('off')
        //         $(this).parent('li').removeClass('off')

        //         $(this).addClass('off') //ë°‘ì¤„
        //         $(this).parent().siblings().addClass('off') //ë°‘ì¤„
        //         $(this).parent('h5').parent('div').parent('li').addClass('off') //
  
        //         console.log($(this).parent('li'))
        //     } else {
        //         $(this).removeClass('off')
        //         $(this).parent().siblings().removeClass('off')
        //         $(this).parent('h5').parent('div').parent('li').removeClass('off') //

        //     }       
        // })
       
      
    </script>

</body>
<script src="main.js"></script>

</html>